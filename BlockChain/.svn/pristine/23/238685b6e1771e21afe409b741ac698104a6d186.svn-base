//
//  AssetsViewController.m
//  BlockChain
//
//  Created by nbs on 2018/7/20.
//  Copyright © 2018年 cn.nbs.block-chain. All rights reserved.
//

#import "AssetsViewController.h"

@interface AssetsViewController ()<UIScrollViewDelegate>

@property (nonatomic, strong) UIView *titleBarView;
@property (nonatomic, strong) WRCustomNavigationBar *customNavBar;


@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet NSLayoutConstraint *topLineCentenX;
@property (weak, nonatomic) IBOutlet UIImageView *topLine;

@end

@implementation AssetsViewController

- (UIView *)titleBarView {
    if (_titleBarView == nil) {
        _titleBarView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, kScreenWidth, 44)];
        _titleBarView.backgroundColor = [UIColor whiteColor];
    }
    return _titleBarView;
}

- (UIScrollView *)scrollView {
    if (_scrollView == nil) {
        _scrollView = [[UIScrollView alloc] initWithFrame:CGRectZero];
        _scrollView.showsVerticalScrollIndicator = NO;
        _scrollView.showsHorizontalScrollIndicator = NO;
    }
    return _scrollView;
}

- (void)viewDidLoad {
    [super viewDidLoad];
//    [self setupUI];
    
    self.topLineCentenX.constant = -(kScreenWidth - 32) / 3.0;
}

- (IBAction)clickTopBtn:(UIButton *)sender {
    switch (sender.tag) {
        case 0: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = -sender.width;
            }];
            [_scrollView scrollToLeft];
        } break;
        case 1: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = 0;
            }];
            [_scrollView scrollRectToVisible:CGRectMake(kScreenWidth, 0, _scrollView.width, _scrollView.height) animated:YES];
        } break;
        case 2: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = sender.width;
            }];
            [_scrollView scrollToRight];
        } break;
    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    int index = scrollView.contentOffset.x / kScreenWidth;
    switch (index) {
        case 0: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = -(kScreenWidth - 32) / 3.0;
            }];
        } break;
        case 1: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = 0;
            }];
        } break;
        case 2: {
            [UIView animateWithDuration:0.75 animations:^{
                self.topLineCentenX.constant = (kScreenWidth - 32) / 3.0;
            }];
        } break;
    }
}

- (void)setupUI {
    self.navigationController.navigationBar.hidden = YES;
    self.automaticallyAdjustsScrollViewInsets = NO;
    if (@available(iOS 11.0, *)) {
        self.scrollView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
    }
    [self setupNavBar];
    [self setupTitleBarView];
    [self setupScrollView];
    [self.view bringSubviewToFront:self.customNavBar];
}

- (void)setupNavBar {
    self.customNavBar = [WRCustomNavigationBar CustomNavigationBar];
    [self.view addSubview:self.customNavBar];
    self.customNavBar.barBackgroundImage = [UIImage imageNamed:@"nav_bar_bg"];
    self.customNavBar.titleLabelColor = [UIColor whiteColor];
    self.customNavBar.title = self.title;
    [self.customNavBar wr_setBottomLineHidden:YES];
}

- (void)setupTitleBarView {
    [self.view addSubview:self.titleBarView];
    [self.titleBarView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.left.right.equalTo(self.view);
        make.top.equalTo(self.customNavBar.mas_bottom);
        make.height.mas_equalTo(44);
    }];
}

- (void)setupScrollView {
    [self.view addSubview:self.scrollView];
    [self.scrollView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.left.right.equalTo(self.titleBarView);
        make.top.equalTo(self.titleBarView.mas_bottom);
        make.bottom.equalTo(self.view).mas_offset(-self.tabBarController.tabBar.height);
    }];
}

@end
